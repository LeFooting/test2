<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculateur VDOT</title>
    <script>
        function calculateVDOT() {
            // Récupérer les valeurs utilisateur
            let distanceKm = parseFloat(document.getElementById("distanceKm").value);
            let hours = parseInt(document.getElementById("hours").value) || 0;
            let minutes = parseInt(document.getElementById("minutes").value) || 0;
            let seconds = parseInt(document.getElementById("seconds").value) || 0;

            // Convertir le temps total en secondes
            let totalTimeSec = hours * 3600 + minutes * 60 + seconds;

            if (isNaN(distanceKm) || totalTimeSec <= 0) {
                document.getElementById("result").innerHTML = "Veuillez entrer une distance et un temps valides.";
                return;
            }

            // Calculer la vitesse (m/s) et la VO2 max
            let velocityMPerMin = (distanceKm * 1000) / totalTimeSec * 60; // vitesse en m/min
            let vo2 = -4.6 + (0.182258 * velocityMPerMin) + (0.000104 * Math.pow(velocityMPerMin, 2));

            // Facteur d'efficacité pour obtenir le VDOT
            let vdot = vo2 / (0.2989558 * Math.pow(velocityMPerMin, 0.25));

            // Afficher le VDOT
            document.getElementById("vdot").innerHTML = `Votre VDOT estimé : ${vdot.toFixed(2)}`;

            // Distances cibles (en km) et leur facteur de correction pour le temps
            let distances = {
                "10 km": 10,
                "Semi-marathon": 21.097,
                "Marathon": 42.195
            };

            // Facteurs de correction Daniels
            let correctionFactors = {
                "10 km": 1.0,
                "Semi-marathon": 1.06,
                "Marathon": 1.15
            };

            let results = "";
            for (let [name, distance] of Object.entries(distances)) {
                let correctionFactor = correctionFactors[name];
                let adjustedTimeSec = (totalTimeSec / distanceKm) * distance * correctionFactor;

                // Conversion en hh:mm:ss
                let predHours = Math.floor(adjustedTimeSec / 3600);
                let predMinutes = Math.floor((adjustedTimeSec % 3600) / 60);
                let predSeconds = Math.round(adjustedTimeSec % 60);

                results += `<li>${name} : ${predHours}h ${predMinutes}m ${predSeconds}s</li>`;
            }

            // Afficher les résultats
            document.getElementById("result").innerHTML = `
                <h3>Estimations des temps de course</h3>
                <ul>${results}</ul>
            `;
        }
    </script>
</head>
<body>
    <h1>Calculateur VDOT</h1>
    <p>Entrez une distance et un temps de référence pour estimer vos performances sur 10 km, semi-marathon et marathon.</p>

    <label>Distance de référence (en km) :</label>
    <input type="number" id="distanceKm" step="0.01" placeholder="Par exemple : 10"><br><br>

    <label>Temps de référence :</label>
    <input type="number" id="hours" placeholder="Heures" min="0"> :
    <input type="number" id="minutes" placeholder="Minutes" min="0" max="59"> :
    <input type="number" id="seconds" placeholder="Secondes" min="0" max="59"><br><br>

    <button onclick="calculateVDOT()">Calculer</button>

    <div id="vdot"></div>
    <div id="result"></div>
</body>
</html>
